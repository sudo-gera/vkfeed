''':'
pkg install python
python3 $0 $@
exit
':'''
open_=open
from os import *
from os.path import *
from subprocess import*
from pathlib import Path
from sys import argv
home=str(Path.home())+'/'
path = str(abspath(dirname(argv[0])))
if path[-1]!='/':
	path+='/'
try:
	mkdir(home+'.vkfeed')
except:
	pass
chdir(home+'.vkfeed')
open_('path','w').write(path)
try:
	run(['apt','download','termux-api'])
except:
	print('installation failed. check internet connection. if it does not help, turn on mobile data and wifi hotspot and try again')
termux=listdir('.')
termux.sort(key=getmtime)
print(termux)
termux=termux[-1]
try:
	run(['dpkg','-i',termux[-1]])
except:
	print('installation failed. turn on mobile data and wifi hotspot and try again')
run(['ln','-s',path+'news.py',home+'../usr/bin/vkfeed'])
print('installation complete. now you can run vkfeed command')
